@tailwind base;
@tailwind components;
@tailwind utilities;

/* Optional pure CSS for now */
html,
body {
  margin: 0;
  padding: 0;
  overscroll-behavior: none;
  -webkit-tap-highlight-color: transparent;
}

body::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: env(safe-area-inset-top); /* only affects top safe area */
  background-color: #ffffff; /* same as your theme-color */
  z-index: 9999;
  pointer-events: none;
}

html {
  font-size: 1px; /* 1rem = 1px, now 314px = 314rem = w-[314px] */
}
/* React Datepicker fix for layout and spacing */
.react-datepicker {
  width: 300px;
  font-size: 13px;
  z-index: 50;
}

.react-datepicker *,
.react-datepicker *::before,
.react-datepicker *::after {
  box-sizing: border-box;
}

/* Ensure month layout doesn't collapse */
.react-datepicker__month {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  padding: 5px;
  width: 100%;
}

/* Week rows have proper height */
.react-datepicker__week {
  display: flex;
  width: 100%;
  justify-content: space-between;
  height: 32px; /* critical for fixing vertical collapse */
}

/* Each day gets a width + height + line height */
.react-datepicker__day {
  width: 36px;
  height: 30px;
  line-height: 30px;
  text-align: center;
  margin: 0 1px;
}

.react-datepicker__current-month {
  font-size: 15px;
  font-weight: 600;
  text-align: center;
  padding: 4px 0;
}

.react-datepicker__day-names {
  display: flex;
  justify-content: space-between;
  padding: 0 5px;
  margin-bottom: 4px;
}

.react-datepicker__day-name {
  width: 36px;
  text-align: center;
  font-size: 12px;
  line-height: 5px;
  margin-top: 15px;
}

.react-datepicker-popper[data-placement^="bottom"] {
  /* transform: translateX(58px) !important; */
  transform: translateY(110px) !important;
}

*:focus {
  outline: none !important;
  box-shadow: none !important;
}

.loader {
  width: 32px;
  height: 32px;
  border: 4px solid #ddd;
  border-top: 4px solid #ff752c;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin: auto;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* Target the toast content by its role */
[role="status"] {
  font-size: 14px !important;
  font-family: "Palanquin", sans-serif !important;
  color: #000000 !important; /* Optional: if you want to adjust text color */
}

.preview-container {
  position: relative;
  display: inline-block;
  width: 300px; /* adjust as needed */
  height: 300px;
}

.preview-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.fluid-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.qna-progress {
  position: relative;
  overflow: hidden;
}

.qna-progress::after {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
  /* subtle sheen – visible mostly on unfilled soft-coral region */
  background-image: linear-gradient(
    120deg,
    rgba(255, 255, 255, 0) 0%,
    rgba(255, 255, 255, 0.18) 12%,
    rgba(255, 255, 255, 0) 24%
  );
  background-repeat: no-repeat;
  background-size: 200% 100%;
  background-position: -100% 0;
  animation: qnaShimmer 10s linear infinite;
  pointer-events: none;
}

@keyframes qnaShimmer {
  0% {
    background-position: -100% 0;
  }
  50% {
    background-position: 0% 0;
  }
  100% {
    background-position: 100% 0;
  }
}

/* Accessibility: honor reduced motion */
@media (prefers-reduced-motion: reduce) {
  .qna-progress::after {
    animation: none;
  }
}

.ellipsis-dots {
  overflow: hidden;
  display: inline-block;
  vertical-align: bottom;
  width: 0ch;
  animation: ellipsis 900ms steps(4, end) infinite;
}
.ellipsis-dots::after {
  content: "…";
}
@keyframes ellipsis {
  to {
    width: 1.5ch;
  }
}

/* slide-in container transitions */
.slide-container {
  will-change: transform, opacity;
  transition: transform 220ms ease-out, opacity 220ms ease-out;
}

.enter-left {
  transform: translateX(0);
  opacity: 1;
  animation: slideFromRight 220ms ease-out;
}

.enter-right {
  transform: translateX(0);
  opacity: 1;
  animation: slideFromLeft 220ms ease-out;
}

.enter-none {
  transform: translateX(0);
  opacity: 1;
}

@keyframes slideFromRight {
  from {
    transform: translateX(20px);
    opacity: 0.001;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideFromLeft {
  from {
    transform: translateX(-20px);
    opacity: 0.001;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* theme.css */
:root {
  /* Core */
  --bg: #ffffff;
  --surface: #ffffff;
  --surface-2: #f8f9fa;
  --text: #2d3436;
  --text-2: #6c757d;
  --border: #e9ecef;
  --divider: #f1f3f5;
  --overlay-strong: rgba(0, 0, 0, 0.07);
  --profile-sub-section: #2d3436;
  --profile-sub-section-desc: #6c757d;
  --goal-list-title: #6c757d;
  --goal-list-desc: #2d3436;
  --general-charcoal-text: #2d3436;
  --faded-text: #6c757d;
  --profile-border: #e9ecef;
  --profile-divider: #f1f3f5;
  --edit-button-bg: #f8f9fa;
  --edit-button-text: #6c757d;
  --profile-section-card-bg: transparent;

  /* Accent */
  --accent: #12b886; /* teal */
  --accent-strong: #0b7285; /* deep teal */
  --danger: #ff7675;

  /* Controls */
  --chip-bg: #e6fcf5;
  --chip-border: #c3fae8;
  --chip-text: #0b7285;
}

/* AMOLED dark */
.theme-dark {
  --bg: #000000; /* viewport */
  --surface: rgba(255, 255, 255, 0.04); /* cards */
  --surface-2: rgba(255, 255, 255, 0.06); /* subtle elevated */
  --text: rgba(255, 255, 255, 0.87);
  --text-2: rgba(255, 255, 255, 0.65);
  --border: rgba(255, 255, 255, 0.08);
  --divider: rgba(255, 255, 255, 0.08);
  --overlay-strong: rgba(0, 0, 0, 0); /* usually unused on dark */
  --profile-sub-section: #ffffff;
  --profile-sub-section-desc: #d2d2d4;
  --goal-list-title: #d2d2d4;
  --goal-list-desc: #ffffff;
  --general-charcoal-text: #ffffff;
  --faded-text: #d2d2d4;
  --profile-border: #101010;
  --profile-divider: #333133;
  --edit-button-bg: #222323;
  --edit-button-text: #bebab9;
  --profile-section-card-bg: #020202;

  --accent: #12d8a1; /* lift for contrast on black */
  --accent-strong: #2ee6b8;
  --danger: #ff6b6b;

  --chip-bg: rgba(18, 216, 161, 0.16);
  --chip-border: rgba(46, 230, 184, 0.36);
  --chip-text: #2ee6b8;
}

/* design-frame.css */
/* 1) The viewport spans the device width; center the canvas */
.df-viewport {
  width: 100vw;
  min-height: 100dvh;
  display: flex;
  justify-content: center;
  background: var(--bg);
}

/* 2) The canvas holds your existing pixel design */
.df-canvas {
  width: 412px; /* M51 reference width */
  max-width: 100%;
  padding: 0; /* keep your internal paddings */
}

/* 3) Phone-specific “locked” breakpoints adjust a few tokens */
:root {
  --fs-title: 28px;
  --fs-h2: 22px;
  --fs-body: 15px;
  --fs-small: 13px;
  --gap: 12px;
  --card-radius: 16px;
  --card-gap: var(--gap);
  --card-pad: 10px;
  --food-height: 390px;
  --chart-height: 230px;
  --padding: 18px;
  --scale: 1;
}

/* Small Android (≤360) and iPhone SE class */
@media (max-width: 360px) {
  :root {
    --fs-title: 26px;
    --fs-h2: 20px;
    --fs-body: 14px;
    --fs-small: 12px;
    --gap: 10px;
    --card-radius: 14px;
    --card-pad: 14px;
    --food-height: 340px;
    --chart-height: 200px;
    --padding: 14px;
    --resolution: 0.9;
  }
}

@media (max-width: 384px) and (min-width: 361px) {
  :root {
    --fs-title: 25px;
    --fs-h2: 22px;
    --fs-body: 15px;
    --fs-small: 13px;
    --gap: 11px;
    --card-radius: 16px;
    --card-pad: 10px;
    --food-height: 390px;
    --chart-height: 230px;
    --padding: 15px;
    --resolution: 0.9;
  }
}

/* iPhone 12/13/14/15 = 390px wide */
@media (max-width: 393px) and (min-width: 385px) {
  :root {
    --fs-title: 27px;
    --fs-h2: 21px;
    --fs-body: 15px;
    --fs-small: 13px;
    --food-height: 360px;
    --chart-height: 210px;
    --padding: 14px;
    --resolution: 0.95;
  }
}


/* Large phones (≥428 iPhone Pro Max) – optional slight up-scale */
@media (min-width: 428px) {
  :root {
    --fs-title: 30px;
    --fs-h2: 24px;
    --fs-body: 16px;
    --fs-small: 14px;
    --gap: 14px;
    --card-radius: 18px;
    --card-pad: 20px;
    --food-height: 410px;
    --chart-height: 250px;
    --padding: 18px;
    --scale: 1.1;
  }
}
